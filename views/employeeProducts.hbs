<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Management</title>
    <link rel="stylesheet" href= "/style/allProducts.css">
</head>
<body>
    <div id="nav-bar">  
        <a href="/employeepage"><img id ="home" src="/images/homepage2.png"></a>  
        <ul>
        <li id="trans" style="margin-left: 100px;"><a href="/employeepage/product">Products Management</a></li>
        <li id="logout" style="background-color: rgb(105, 50, 50); margin-left:900px" ><a href="/homepage/logout">Logout</a></li>
        </ul>
    </div>
    
<div class = "container">
    <div id="info">
        <h1 id="head">Products Management</h1>
            <div id="info-line"></div>
        <p style="font-size: 18px;color: white; text-align:center">Total products: {{count}}</p>
    
            <form action="" method="POST">
                <input required id="searchbar" type="text" name ="key" placeholder="Search something...">
                <button id ="searchbutton">Search</button>
            </form>
    </div>
    <BR>

{{# each products}}

    <div id="content">

        <div id="content-left">
            <p class="label"><b>Product Name:</b> {{Name}}</p>
            <p class="label"><b>Price:</b> {{Price}}</p>
            <p class="label"><b>Origin:</b> {{Origin}}</p>
            <p class="label"><b>Description:</b> {{Description}}</p>
        </div>


        <div id="content-right">
            <p style="margin-left: 10px;" class="label"><b>Image:</b></p>
            <img src='../homepage/photo/{{_id}}' alt="" width="180px" height="150px" style="margin-left: 75px;margin-top:-40px">
        </div>

        <div id="endline"></div>

        <a href="/employeepage/product/edit?id={{_id}}"><img title="Edit" id="edit" src="/images/edit.png"></a>
        <img title="Delete" onclick="confirmdel('{{_id}}')" id="delete" src="/images/delete.png">

        <div class="pop-delete-background" id='{{_id}}'>
            <div class="pop-delete" id='{{_id}}'>
            <h1 style="font-size: 20px; margin-left:30px" class="forgot-form">Do you want to delete this product?</h1>
            <p style="margin-left: 30px;">Product: {{Name}}</p>
            <button style="margin-top: 10px; margin-left:50px" onclick="closedel('{{_id}}');" id="ignore"><img class="deleteicon" src="/images/uncheck.png"></button>
            <a href="/employeepage/product/delete?id={{_id}}"><button style="margin-top: 10px; margin-left:160px" id="check"><img class="checkicon" src="/images/check.png"></button></a>
            </div>
        </div>

    </div>
{{/each}}


</div>

<div id="option">
    <img title="Add new product" id ="add" onclick="add()" src="/images/add.png">
</div>


<div id="popup-background">
<div id= "popup-container">

    <form id="form" action="product/add" enctype="multipart/form-data" method="POST">
    <h1 class="forgot-form" style="margin-top: 35px;">Add New Product</h1>

        <div id="pop-left">
            <label class="label"><b>Product Name </b></label><BR><BR>
            <input style="margin-top: -8px;" class="forgot-input" type="text" placeholder="i.e Superman Toy" name="name" required><BR><BR>

            <label style="position: absolute; margin-top: -15px" class="label"><b>Price </b></label><BR><BR>
            <input class="forgot-input" type="text" placeholder="0xx" name="price" required><BR><BR>

            <label style="position: absolute; margin-top: -15px" class="label"><b>Origin </b></label><BR><BR>
            <input class="forgot-input" type="text" placeholder="0xx" name="origin" required><BR>
        </div>

        <div id="horizon-line"></div>

        <div id="pop-right">
            <label class="label"for="email"><b>Product Image </b></label><BR><BR>
            <input style="margin-top: -8px;" type="file" name="picture" accept="image/*" required><BR><BR><BR>

            <label style="position: absolute; margin-top: -15px" class="label"><b>Product Description </b></label><BR>
            <textarea id="description" placeholder="Add description here..." name="description" required></textarea><BR>
            <div onclick="closeform(); reset()" id="ignore"><img class="ignoreicon" src="/images/uncheck.png"></div>
            <button type="submit" id="check"><img class="checkicon" src="/images/check.png"></button>      
        </div>
    </form>
</div>
</div>


<script>
function add() {
    document.getElementById('popup-background').style.visibility = "visible";
    document.getElementById('popup-background').style.opacity = 1;
}

function closeform() {
    document.getElementById('popup-background').style.visibility = "hidden";
    document.getElementById('popup-background').style.opacity = 0;
}

function reset()
{
    document.getElementById("form").reset();
}

function confirmdel(id)
{
   document.getElementById(id).style.visibility= "visible";
   document.getElementById(id).style.opacity= 1;
}
function closedel(id)
{
   document.getElementById(id).style.visibility= "hidden";
   document.getElementById(id).style.opacity= 0;
}
</script>

</body>
</html>